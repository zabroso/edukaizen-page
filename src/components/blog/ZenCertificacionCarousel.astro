---
const groups = [
  {
    label: "Certificaciones",
    items: [
      {
        image: "https://images.unsplash.com/photo-1581091215367-59ab6c6c1c6b",
        title: "Universidad Técnica Metropolitana",
        quote: "Acompañamiento claro y metodológico.",
        author: "Dirección Académica",
      },
      {
        image: "https://images.unsplash.com/photo-1600880292203-757bb62b4baf",
        title: "Instituto Profesional Andes",
        quote: "Proceso ordenado y efectivo.",
        author: "Equipo de Calidad",
      },
      {
        image: "https://images.unsplash.com/photo-1521737604893-d14cc237f11d",
        title: "Centro de Formación Nova",
        quote: "Resultados visibles en corto plazo.",
        author: "Rectoría",
      },
    ],
  },
  {
    label: "Casos de Éxito",
    items: [
      {
        image: "https://images.unsplash.com/photo-1556761175-4b46a572b786",
        title: "Municipalidad de Valparaíso",
        quote: "Mejoramos procesos internos rápidamente.",
        author: "Gestión Municipal",
      },
      {
        image: "https://images.unsplash.com/photo-1542744173-8e7e53415bb0",
        title: "Fundación Educacional Sur",
        quote: "Equipos más alineados y eficientes.",
        author: "Dirección Ejecutiva",
      },
      {
        image: "https://images.unsplash.com/photo-1519389950473-47ba0277781c",
        title: "Corporación Educativa Norte",
        quote: "Metodología clara y replicable.",
        author: "Gestión Estratégica",
      },
    ],
  },
  {
    label: "Cursos",
    items: [
      {
        image: "https://images.unsplash.com/photo-1584697964154-3d9a3e6b6c8b",
        title: "Curso Kaizen Educativo",
        quote: "Aplicabilidad inmediata.",
        author: "Participantes",
      },
      {
        image: "https://images.unsplash.com/photo-1596495578065-6e0763fa1178",
        title: "Gestión de Calidad",
        quote: "Casos reales y enfoque práctico.",
        author: "Coordinación Académica",
      },
      {
        image: "https://images.unsplash.com/photo-1509062522246-3755977927d7",
        title: "Transformación Digital",
        quote: "Visión moderna y estratégica.",
        author: "Equipo TI",
      },
    ],
  },
];
---

<section class="mt-16">
  <!-- Tabs -->
  <div class="mb-8 flex gap-2">
    {groups.map((group, i) => (
      <button
        data-index={i}
        class={`tab-btn rounded-lg px-4 py-2 text-sm font-medium transition
        ${i === 0
          ? "bg-primary text-primary-foreground"
          : "text-foreground/70 hover:bg-foreground/5 hover:text-foreground"}`}
      >
        {group.label}
      </button>
    ))}
  </div>

  <!-- Carrusel -->
  <div class="overflow-hidden">
    <div
      id="carousel"
      class="flex transition-transform duration-500 ease-in-out"
    >
      {groups.flatMap((group) =>
        group.items.map((item) => (
          <article
            class="flex-none basis-1/3 px-3 min-w-0"
          >
            <div class="h-full rounded-xl border border-border bg-background/60 backdrop-blur overflow-hidden">
              <!-- Imagen controlada -->
              <div class="h-48 w-full overflow-hidden">
                <img
                  src={item.image}
                  alt={item.title}
                  class="h-full w-full object-cover"
                />
              </div>

              <div class="p-4">
                <h4 class="text-sm font-semibold text-foreground">
                  {item.title}
                </h4>
                <p class="mt-2 text-sm text-foreground/70">
                  “{item.quote}”
                </p>
                <span class="mt-3 block text-xs text-foreground/50">
                  — {item.author}
                </span>
              </div>
            </div>
          </article>
        ))
      )}
    </div>
  </div>
</section>

<script>
  const buttons = document.querySelectorAll(".tab-btn");
  const carousel = document.getElementById("carousel");

  buttons.forEach((btn, index) => {
    btn.addEventListener("click", () => {
      buttons.forEach(b =>
        b.classList.remove("bg-primary", "text-primary-foreground")
      );
      btn.classList.add("bg-primary", "text-primary-foreground");

      carousel.style.transform = `translateX(-${index * 100}%)`;
    });
  });
</script>
